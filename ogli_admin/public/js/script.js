function getURLVar(e){var t=[],a=String(document.location).split("?");if(a[1]){var n=a[1].split("&");for(i=0;i<n.length;i++){var l=n[i].split("=");l[0]&&l[1]&&(t[l[0]]=l[1])}return t[e]?t[e]:""}}$(document).ready(function(){$("button[type='submit']").on("click",function(){$("form[id*='form-']").submit()}),$(".text-danger").each(function(){var e=$(this).parent().parent();e.hasClass("form-group")&&e.addClass("has-error")}),$("#menu a[href]").on("click",function(){sessionStorage.setItem("menu",$(this).attr("href"))}),sessionStorage.getItem("menu")?$("#menu a[href='"+sessionStorage.getItem("menu")+"']").parents("li").addClass("active open"):$("#menu #dashboard").addClass("active"),"active"==localStorage.getItem("column-left")?($("#button-menu i").replaceWith('<i class="fa fa-dedent fa-lg"></i>'),$("#column-left").addClass("active"),$("#menu li.active").has("ul").children("ul").addClass("collapse in"),$("#menu li").not(".active").has("ul").children("ul").addClass("collapse")):($("#button-menu i").replaceWith('<i class="fa fa-indent fa-lg"></i>'),$("#menu li li.active").has("ul").children("ul").addClass("collapse in"),$("#menu li li").not(".active").has("ul").children("ul").addClass("collapse")),$("#button-menu").on("click",function(){$("#column-left").hasClass("active")?($("#button-menu i").replaceWith('<i class="fa fa-indent fa-lg"></i>'),$("#column-left").removeClass("active"),$("#menu > li > ul").removeClass("in collapse"),$("#menu > li > ul").removeAttr("style")):($("#button-menu i").replaceWith('<i class="fa fa-dedent fa-lg"></i>'),$("#column-left").addClass("active"),$("#menu li.open").has("ul").children("ul").addClass("collapse in"),$("#menu li").not(".open").has("ul").children("ul").addClass("collapse"))}),$("#menu").find("li").has("ul").children("a").on("click",function(){$("#column-left").hasClass("active")?($(this).parent("li").toggleClass("open").children("ul").collapse("toggle"),$(this).parent("li").siblings().removeClass("open").children("ul.in").collapse("hide")):$(this).parent().parent().is("#menu")||($(this).parent("li").toggleClass("open").children("ul").collapse("toggle"),$(this).parent("li").siblings().removeClass("open").children("ul.in").collapse("hide"))}),$("button[data-event='showImageDialog']").attr("data-toggle","image").removeAttr("data-event"),$(document).delegate("button[data-toggle='image']","click",function(){$("#modal-image").remove(),$.ajax({url:"index.php?route=common/filemanager&token="+getURLVar("token"),dataType:"html",beforeSend:function(){$("#button-image i").replaceWith('<i class="fa fa-circle-o-notch fa-spin"></i>'),$("#button-image").prop("disabled",!0)},complete:function(){$("#button-image i").replaceWith('<i class="fa fa-upload"></i>'),$("#button-image").prop("disabled",!1)},success:function(e){$("body").append('<div id="modal-image" class="modal">'+e+"</div>"),$("#modal-image").modal("show")}})}),$(document).delegate("a[data-toggle='image']","click",function(e){e.preventDefault();var t=this;$(t).popover({html:!0,placement:"right",trigger:"manual",content:function(){return'<button type="button" id="button-image" class="btn btn-primary"><i class="fa fa-pencil"></i></button> <button type="button" id="button-clear" class="btn btn-danger"><i class="fa fa-trash-o"></i></button>'}}),$(t).popover("toggle"),$("#button-image").on("click",function(){$("#modal-image").remove(),$.ajax({url:"index.php?route=common/filemanager&token="+getURLVar("token")+"&target="+$(t).parent().find("input").attr("id")+"&thumb="+$(t).attr("id"),dataType:"html",beforeSend:function(){$("#button-image i").replaceWith('<i class="fa fa-circle-o-notch fa-spin"></i>'),$("#button-image").prop("disabled",!0)},complete:function(){$("#button-image i").replaceWith('<i class="fa fa-upload"></i>'),$("#button-image").prop("disabled",!1)},success:function(e){$("body").append('<div id="modal-image" class="modal">'+e+"</div>"),$("#modal-image").modal("show")}}),$(t).popover("hide")}),$("#button-clear").on("click",function(){$(t).find("img").attr("src",$(t).find("img").attr("data-placeholder")),$(t).parent().find("input").attr("value",""),$(t).popover("hide")})}),$("[data-toggle='tooltip']").tooltip({container:"body",html:!0}),$(document).ajaxStop(function(){$("[data-toggle='tooltip']").tooltip({container:"body"})})}),function(e){function t(t,i){this.element=t,this.options=i,this.timer=null,this.items=new Array,e(t).attr("autocomplete","off"),e(t).on("focus",e.proxy(this.focus,this)),e(t).on("blur",e.proxy(this.blur,this)),e(t).on("keydown",e.proxy(this.keydown,this)),e(t).after('<ul class="dropdown-menu"></ul>'),e(t).siblings("ul.dropdown-menu").delegate("a","click",e.proxy(this.click,this))}t.prototype={focus:function(){this.request()},blur:function(){setTimeout(function(e){e.hide()},200,this)},click:function(t){t.preventDefault(),value=e(t.target).parent().attr("data-value"),value&&this.items[value]&&this.options.select(this.items[value])},keydown:function(e){switch(e.keyCode){case 27:this.hide();break;default:this.request()}},show:function(){var t=e(this.element).position();e(this.element).siblings("ul.dropdown-menu").css({top:t.top+e(this.element).outerHeight(),left:t.left}),e(this.element).siblings("ul.dropdown-menu").show()},hide:function(){e(this.element).siblings("ul.dropdown-menu").hide()},request:function(){clearTimeout(this.timer),this.timer=setTimeout(function(t){t.options.source(e(t.element).val(),e.proxy(t.response,t))},200,this)},response:function(t){if(html="",t.length){for(i=0;i<t.length;i++)this.items[t[i].value]=t[i];for(i=0;i<t.length;i++)t[i].category||(html+='<li data-value="'+t[i].value+'"><a href="#">'+t[i].label+"</a></li>");var a=new Array;for(i=0;i<t.length;i++)t[i].category&&(a[t[i].category]||(a[t[i].category]=new Array,a[t[i].category].name=t[i].category,a[t[i].category].item=new Array),a[t[i].category].item.push(t[i]));for(i in a)for(html+='<li class="dropdown-header">'+a[i].name+"</li>",j=0;j<a[i].item.length;j++)html+='<li data-value="'+a[i].item[j].value+'"><a href="#">&nbsp;&nbsp;&nbsp;'+a[i].item[j].label+"</a></li>"}html?this.show():this.hide(),e(this.element).siblings("ul.dropdown-menu").html(html)}},e.fn.autocomplete=function(i){return this.each(function(){var a=e(this).data("autocomplete");a||(a=new t(this,i),e(this).data("autocomplete",a))})}}(window.jQuery);